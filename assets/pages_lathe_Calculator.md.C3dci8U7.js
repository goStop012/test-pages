var Y=Object.defineProperty;var G=r=>{throw TypeError(r)};var Z=(r,i,t)=>i in r?Y(r,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[i]=t;var e=(r,i,t)=>Z(r,typeof i!="symbol"?i+"":i,t),tt=(r,i,t)=>i.has(r)||G("Cannot "+t);var v=(r,i,t)=>i.has(r)?G("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(r):i.set(r,t);var T=(r,i,t)=>(tt(r,i,"access private method"),t);import{L as et,T as nt,a as b,b as it,c as B,d as V,e as m,f as k,g as _,h as N,i as M,j as st,k as z,l as ot,m as F,n as at,C as ht}from"./chunks/inputValueType.D_3NTUqz.js";import{P as n}from"./chunks/Point.BqqaAIQu.js";import{U as D}from"./chunks/Utils.n4EkZCRG.js";import{M as x}from"./chunks/Macro.NyvPo287.js";import{d as rt,o as W,c as I,C as dt,F as lt,G as J,j as U,a as ct}from"./chunks/framework.5q7voRLl.js";var S,H;class A{constructor(i={}){v(this,S);e(this,"sideLengthA");e(this,"sideLengthB");e(this,"sideLengthC");e(this,"angle");const{angle:t=0,sideLengthA:o=0,sideLengthB:a=0,sideLengthC:h=0}=i;if(this.angle=t%90,this.sideLengthA=o,this.sideLengthB=a,this.sideLengthC=h,!this.valid())throw new Error(`${this.constructor.name}，Invalid parameters: ${JSON.stringify({angle:t,sideLengthA:o,sideLengthB:a,sideLengthC:h})}`);T(this,S,H).call(this)}valid(){const i=o=>D.isNumber(o)&&o>0;return[this.angle,this.sideLengthA,this.sideLengthB,this.sideLengthC].filter(o=>i(o)).length===2}getSideLengthA(){return x.sqrt(this.sideLengthC**2-this.sideLengthB**2)}getSideLengthB(){return x.sqrt(this.sideLengthC**2-this.sideLengthA**2)}getSideLengthC(){return x.sqrt(this.sideLengthA**2+this.sideLengthB**2)}toPoint(){return new n({x:this.sideLengthA*2,z:this.sideLengthB})}}S=new WeakSet,H=function(){this.angle?this.sideLengthA?(this.sideLengthB=this.sideLengthA*x.tan(this.angle),this.sideLengthC=this.getSideLengthC()):this.sideLengthB?(this.sideLengthA=this.sideLengthB/x.tan(this.angle),this.sideLengthC=this.getSideLengthC()):this.sideLengthC&&(this.sideLengthA=this.sideLengthC*x.cos(this.angle),this.sideLengthB=this.getSideLengthB()):(this.sideLengthA&&this.sideLengthB?this.sideLengthC=this.getSideLengthC():this.sideLengthA&&this.sideLengthC?this.sideLengthB=this.getSideLengthB():this.sideLengthB&&this.sideLengthC&&(this.sideLengthA=this.getSideLengthA()),this.angle=x.acos(this.sideLengthA/this.sideLengthC))};var E,Q;const q=class q extends A{constructor(t={}){super(t);v(this,E);e(this,"sideLengthACRC");e(this,"sideLengthBCRC");e(this,"toolRadius");e(this,"toolPositon");const{toolRadius:o=0,toolPositon:a="前刀尖",angle:h,sideLengthA:d,sideLengthB:s,sideLengthC:l}=t;if(o<0)throw new Error(`${this.constructor.name}，当前值：toolRadius = ${o}，取值范围：toolRadius > 0`);this.toolRadius=o,this.toolPositon=a,this.sideLengthACRC=0,this.sideLengthBCRC=0,T(this,E,Q).call(this)}static getCrcLength(t,o){return t-t*x.tan(o/2)}toPoint(){return new n({x:this.sideLengthACRC*2,z:this.sideLengthBCRC})}};E=new WeakSet,Q=function(){if(!this.angle)throw new Error(`${this.constructor.name}，Triangle angle must be set before calculating CRC.`);this.sideLengthACRC=q.getCrcLength(this.toolRadius,this.angle),this.sideLengthBCRC=q.getCrcLength(this.toolRadius,90-this.angle),this.toolPositon==="后刀尖"&&(this.sideLengthBCRC=this.toolRadius*2-this.sideLengthBCRC,this.sideLengthACRC=new A({angle:this.angle,sideLengthB:this.sideLengthBCRC}).sideLengthA)};let y=q;class p{constructor(i,t){e(this,"startPoint");e(this,"endPoint");this.startPoint=i,this.endPoint=t}get vector(){return this.endPoint.sub(this.startPoint)}get distance(){return x.sqrt(this.vector.x**2+this.vector.y**2)}get unitVector(){return this.vector.div(this.distance)}get middle(){return this.startPoint.add(this.endPoint).div(2)}get slope(){return this.vector.x===0?1/0:this.vector.y/this.vector.x}get angle(){return D.radiansToDegrees(Math.atan2(this.vector.y,this.vector.x))}get increase(){return new n({y:(this.endPoint.y-this.startPoint.y)/2,x:this.endPoint.x-this.startPoint.x})}get direction(){return this.angle===90?"↑":this.angle===270?"↓":this.angle===0?"→":this.angle===180?"←":this.increase.x>0&&this.increase.y<0?"↘":this.increase.x<0&&this.increase.y<0?"↙":this.increase.x>0&&this.increase.y>0?"↗":this.increase.x<0&&this.increase.y>0?"↖":"null"}extendOrShorten(i={}){const{length:o=1,relative:a="startPoint",vertical:h=!0}=i,d=o/1,s=a==="startPoint"?-1:1;let l;h?l=new A({angle:this.angle%90,sideLengthA:1}).toPoint():l=new A({angle:this.angle%90,sideLengthC:1}).toPoint();const g=this[a].y+l.y*Math.sign(this.vector.y)*d*s,c=this[a].x+l.x*Math.sign(this.vector.x)*d*s;return a==="startPoint"?new p(new n({y:g,x:c}),this.endPoint):new p(this.startPoint,new n({y:g,x:c}))}rotateByStart(i){const t=D.degreesToRadians(i),o=Math.cos(t),a=Math.sin(t),h=this.vector.x*o-this.vector.y*a,d=this.vector.x*a+this.vector.y*o;return new p(this.startPoint,new n({x:h,y:d}).add(this.startPoint))}translation(i){return new p(this.startPoint.add(i),this.endPoint.add(i))}}var O,K;class gt{constructor(i={}){v(this,O);e(this,"toolRadius");e(this,"value");e(this,"type");e(this,"u");e(this,"w");const{toolRadius:t=.4,value:o=1,type:a="chamfer"}=i;this.toolRadius=t,this.value=o,this.type=a,T(this,O,K).call(this)}}O=new WeakSet,K=function(){this.type==="chamfer"?(this.w=this.value+y.getCrcLength(this.toolRadius,45),this.u=this.w*2):this.type==="radius"&&(this.w=this.value+this.toolRadius,this.u=this.w*2)};class X{constructor({quadrant:i="第一象限",pointC:t=new n({x:100,z:0}),angle:o=45,value:a=1,direction:h="逆时针",position:d="外侧",toolRadius:s=.4,frontLineType:l="竖直",afterLineType:g="水平",toolPositon:c="前刀尖",valueType:P="Uhalf"}={}){e(this,"quadrant");e(this,"pointC");e(this,"angle");e(this,"valueType");e(this,"value");e(this,"direction");e(this,"position");e(this,"toolRadius");e(this,"toolPositon");e(this,"frontLineType");e(this,"afterLineType");e(this,"pointA");e(this,"pointB");this.quadrant=i,this.pointC=t,this.angle=o,this.value=a,this.direction=h,this.position=d,this.toolRadius=s,this.frontLineType=l,this.afterLineType=g,this.toolPositon=c,this.valueType=P}}class ut extends X{constructor(t={}){const{quadrant:o="第一象限",pointC:a=new n({x:100,z:0}),angle:h=45,value:d=1,direction:s="逆时针",position:l="外侧",toolRadius:g=.4,frontLineType:c="竖直",afterLineType:P="水平"}=t;super(t);e(this,"radius");e(this,"radiusCRC");this.radius=h===45?this.value:void 0;const w=this.calc();this.pointA=w.pointA,this.pointB=w.pointB,this.radiusCRC=w.radiusCRC}calc(){const t=new A({angle:this.angle,sideLengthA:this.value}),o={第一象限:{pointA:new n({x:-(t.sideLengthA*2),z:0}),pointB:new n({x:0,z:-t.sideLengthB})},第四象限:{pointA:new n({x:0,z:-t.sideLengthB}),pointB:new n({x:t.sideLengthA*2,z:0})},第二象限:{pointA:new n({x:0,z:t.sideLengthB}),pointB:new n({x:-(t.sideLengthA*2),z:0})},第三象限:{pointA:new n({x:t.sideLengthA*2,z:0}),pointB:new n({x:0,z:t.sideLengthB})}},a=this.toolRadius!==0,h=this.position==="外侧",d=this.direction==="顺时针",s=a?this.toolRadius:0,l=h?1:-1,g=o[this.quadrant],c=g.pointA.mul(s*l),P=g.pointB.mul(s*l),w=new n(this.pointC).add(g.pointA).add(c),R=new n(this.pointC).add(g.pointB).add(P),L=this.radius??0,u=a?h?L+this.toolRadius:L-this.toolRadius:L;return d?{pointA:R,pointB:w,radiusCRC:u}:{pointA:w,pointB:R,radiusCRC:u}}}class j extends X{constructor(t={}){const{quadrant:o="第一象限",pointC:a=new n({x:100,z:0}),angle:h=45,value:d=1,direction:s="逆时针",position:l="外侧",toolRadius:g=0}=t;super(t);e(this,"chamfer");e(this,"chamferCRC");e(this,"unitVector");e(this,"length");e(this,"arrowDirection");e(this,"extendFromPointA");this.chamfer=this.angle===45?this.value:void 0;const c=this.calc();this.pointA=c.pointA,this.pointB=c.pointB,this.chamferCRC=c.chamferCRC,this.arrowDirection=new p(this.pointA,this.pointB).direction,this.unitVector=new p(this.pointA,this.pointB).unitVector,this.extendFromPointA=new p(this.pointA,this.pointB).extendOrShorten().startPoint,this.length=new p(this.pointA,this.pointB).distance}calc(){(this.quadrant==="第二象限"||this.quadrant==="第三象限")&&(this.toolPositon="后刀尖");let t;this.valueType==="Uhalf"&&(t=this.value),this.valueType==="W"&&(t=new A({angle:this.angle,sideLengthB:this.value}).sideLengthA);const o=new A({angle:this.angle,sideLengthA:t}),a=new y({toolRadius:this.toolRadius,angle:this.angle,sideLengthA:t,toolPositon:this.toolPositon}),h={第一象限:{pointA:new n({x:-2,z:0}),pointB:new n({x:0,z:-1})},第四象限:{pointA:new n({x:2,z:0}),pointB:new n({x:0,z:-1})},第二象限:{pointA:new n({x:-2,z:0}),pointB:new n({x:0,z:1})},第三象限:{pointA:new n({x:2,z:0}),pointB:new n({x:0,z:1})}},d={第一象限:{pointA:new n({x:-2,z:0}),pointB:new n({x:0,z:-1})},第四象限:{pointA:new n({x:2,z:0}),pointB:new n({x:0,z:-1})},第二象限:{pointA:new n({x:2,z:0}),pointB:new n({x:0,z:-1})},第三象限:{pointA:new n({x:2,z:0}),pointB:new n({x:0,z:1})}},s=this.toolRadius!==0,l=this.position==="外侧",g=this.direction==="顺时针",c=s?1:0,P=l?1:-1,w={A:h[this.quadrant].pointA,B:h[this.quadrant].pointB},R={A:d[this.quadrant].pointA,B:d[this.quadrant].pointB},L={A:w.A.mul(o.sideLengthA),B:w.B.mul(o.sideLengthB)},u={A:R.A.mul(a.sideLengthACRC).mul(c).mul(P),B:R.B.mul(a.sideLengthBCRC).mul(c).mul(P)};if(g){let $;$=L.A,L.A=L.B,L.B=$}let f=new n(this.pointC).add(L.A),C=new n(this.pointC).add(L.B);return this.frontLineType==="竖直"&&(this.afterLineType==="水平"&&(f=f.add(u.A),C=C.add(u.B)),this.afterLineType==="竖直"&&(f=f.add(u.A),C=C.add(u.A))),this.frontLineType==="水平"&&(this.afterLineType==="水平"&&(f=f.add(u.B),C=C.add(u.B)),this.afterLineType==="竖直"&&(f=f.add(u.B),C=C.add(u.A))),this.chamferCRC=this.chamfer?this.chamfer+y.getCrcLength(this.toolRadius,45)*P:null,{pointA:f,pointB:C,chamferCRC:this.chamferCRC}}}class pt{constructor(i={}){e(this,"startPoint");e(this,"endPoint");e(this,"startExtendLength");e(this,"endExtendLength");e(this,"toolRadius");e(this,"distance");e(this,"taper");e(this,"direction");e(this,"angle");e(this,"outStartPoint");e(this,"outEndPoint");const{startPoint:t=new n({x:100,z:0}),endPoint:o=new n({x:120,z:-10}),startExtendLength:a=0,endExtendLength:h=0,toolRadius:d=0}=i;this.startPoint=t,this.endPoint=o,this.startExtendLength=a,this.endExtendLength=h,this.toolRadius=d;let s=new p(new n(t),new n(o));s=s.extendOrShorten({length:a,relative:"startPoint"}),s=s.extendOrShorten({length:h,relative:"endPoint"}),this.taper=s.startPoint.x-s.endPoint.x,this.angle=s.angle,this.direction=s.direction,this.distance=s.distance,this.outStartPoint=s.startPoint,this.outEndPoint=s.endPoint}}class Lt{constructor(i={}){e(this,"startPoint");e(this,"endPoint");e(this,"startExtendLength");e(this,"endExtendLength");e(this,"toolRadius");e(this,"taper");e(this,"direction");e(this,"distance");e(this,"angle");e(this,"outStartPoint");e(this,"outEndPoint");const{startPoint:t=new n({x:100,z:0}),endPoint:o=new n({x:120,z:-10}),startExtendLength:a=0,endExtendLength:h=0,toolRadius:d=0}=i;this.startPoint=t,this.endPoint=o,this.startExtendLength=a,this.endExtendLength=h,this.toolRadius=d;let s=new p(new n(t),new n(o));s=s.extendOrShorten({length:a,relative:"startPoint"}),s=s.extendOrShorten({length:h,relative:"endPoint"}),this.taper=s.startPoint.y-s.endPoint.y,this.angle=s.angle,this.direction=s.direction,this.distance=s.distance,this.outStartPoint=s.startPoint,this.outEndPoint=s.endPoint}}const wt=rt({__name:"Calculator",setup(r){class i{constructor(a){e(this,"name");e(this,"input");e(this,"output");e(this,"instance");const{name:h,input:d,instance:s}=a;this.name=h,this.input=d,this.instance=s,this.output=new s.constructor(at(d))}}const t=[new i({name:"Tolerance",input:{tolerance:new et},instance:new nt}),new i({name:"RightTriangeChamferSimple",input:{value:new b(1),type:new it("chamfer"),toolRadius:new B(0)},instance:new gt}),new i({name:"RightTriangeCtypeChamfer",input:{quadrant:new V,pointC:new m(new n({x:100,z:0})),angle:new k(45),valueType:new _("Uhalf"),value:new b(1),direction:new N("逆时针"),position:new M("外侧"),toolRadius:new B(0)},instance:new j}),new i({name:"RightTriangeRtypeChamfer",input:{quadrant:new V,pointC:new m(new n({x:100,z:0})),valueType:new _("Uhalf"),value:new st(1),direction:new N("逆时针"),position:new M("外侧"),toolRadius:new B(0)},instance:new ut}),new i({name:"G90",input:{startPoint:new m(new n({x:100,z:0})),endPoint:new m(new n({x:120,z:-20})),startExtendLength:new z,endExtendLength:new z,toolRadius:new B(0)},instance:new Lt}),new i({name:"G94",input:{startPoint:new m(new n({x:100,z:0})),endPoint:new m(new n({x:120,z:-20})),startExtendLength:new z,endExtendLength:new z,toolRadius:new B(0)},instance:new pt}),new i({name:"RightTriangeCtypeChamfer-第二象限测试",input:{quadrant:new V("第二象限"),pointC:new m(new n({x:12.7,z:-18})),angle:new k(80),valueType:new _("Uhalf"),value:new b(3.175),direction:new N("顺时针"),position:new M("外侧"),toolRadius:new B(.4),toolPositon:new ot("前刀尖"),frontLineType:new F("竖直"),afterLineType:new F("水平")},instance:new j})];return(o,a)=>(W(),I(lt,null,dt(t,h=>J(ht,{data:h,displayHader:!0},null,8,["data"])),64))}}),Rt=JSON.parse('{"title":"Calculator","description":"","frontmatter":{},"headers":[],"relativePath":"pages/lathe/Calculator.md","filePath":"pages/lathe/Calculator.md"}'),ft={name:"pages/lathe/Calculator.md"},yt=Object.assign(ft,{setup(r){return(i,t)=>(W(),I("div",{"data-pagefind-body":!0},[t[0]||(t[0]=U("h1",{id:"calculator",tabindex:"-1"},[ct("Calculator "),U("a",{class:"header-anchor",href:"#calculator","aria-label":'Permalink to "Calculator"'},"​")],-1)),t[1]||(t[1]=U("p",null,"This is a calculator component.",-1)),J(wt)]))}});export{Rt as __pageData,yt as default};
