var V=Object.defineProperty;var N=(a,e,t)=>e in a?V(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var m=(a,e,t)=>N(a,typeof e!="symbol"?e+"":e,t);import{U as R,_ as b,p as x,o,c as r,k as h,t as C,a3 as S,j as i,F as f,C as g,G as O,a as E}from"./chunks/framework.5q7voRLl.js";class I{constructor(e,t){m(this,"cells");m(this,"columnIndexMap");m(this,"COLUMNS");m(this,"ROWS");this.COLUMNS=e,this.ROWS=t,this.cells=R(this.COLUMNS.map(()=>Array(this.ROWS).fill(""))),this.columnIndexMap=Object.fromEntries(this.COLUMNS.map((n,l)=>[n,l]))}evalCell(e){if(!e.startsWith("="))return e;e=e.slice(1).replace(/\b([A-Z])(\d{1,2})\b/g,(t,n,l)=>{const s=this.columnIndexMap[n];return s!==void 0?`get(${s}, ${l})`:`#ERROR: Invalid Column ${n}`});try{return new Function("get",`return ${e}`)(this.getCellValue.bind(this))}catch(t){return`#ERROR ${t}`}}getCellValue(e,t){if(!this.isValidCoordinate(e,t))return`#ERROR: Invalid coordinates (${e}, ${t})`;const n=this.cells[e][t];if(n==="")return null;const l=this.evalCell(n),s=Number(l);return Number.isFinite(s)?s:l}setCellValue(e,t,n){if(!this.isValidCoordinate(e,t)){console.error(`Invalid cell coordinates (${e}, ${t})`);return}this.cells[e][t]=String(n)}setRowValue(e,t){if(!this.isValidRow(e)||t.length!==this.COLUMNS.length){console.error("Invalid row or value length mismatch.");return}t.forEach((n,l)=>{this.setCellValue(l,e,n)})}getCellAsObject(e,t){if(this.isValidCoordinate(e,t)){const n=this.COLUMNS[e],l=this.getCellValue(e,t);return l===null?{}:{[n]:l}}return{error:"Invalid cell coordinates"}}getRowAsObject(e){if(this.isValidRow(e)){const t={};return this.COLUMNS.forEach((n,l)=>{const s=this.getCellValue(l,e);s!==null&&(t[n]=s)}),t}return{error:"Invalid row index"}}setRowFromObject(e,t){if(!this.isValidRow(e)){console.error("Invalid row index.");return}for(const n in t){const l=this.columnIndexMap[n];l!==void 0?this.setCellValue(l,e,t[n]):console.error(`Invalid column name: ${n}`)}}setCellFromObject(e,t){const n=Object.keys(t)[0],l=this.columnIndexMap[n];l!==void 0?this.setCellValue(l,e,t[n]):console.error(`Invalid column name: ${n}`)}setGCodes(e){e.forEach((t,n)=>{const l={},s=t.match(/([A-Z])(-?\d*\.?\d*)/g);s&&s.forEach(d=>{const c=d[0],v=d.slice(1),p=parseFloat(v);isNaN(p)||(l[c]=p)}),this.setRowFromObject(n,l)})}getGCodes(){const e=[];for(let t=0;t<this.ROWS;t++){const n=[];for(let l=0;l<this.COLUMNS.length;l++){const s=this.COLUMNS[l],d=this.getCellValue(l,t);d!==null&&n.push(`${s}${d}`)}n.length>0&&e.push(n.join(" "))}return e}isValidCoordinate(e,t){return e>=0&&e<this.COLUMNS.length&&this.isValidRow(t)}isValidRow(e){return e>=0&&e<this.ROWS}}const u=new I(["G","X","Z","U","W","A","C","R"],20),w=["G00 X94.","G1 Z0.02","A90.","X98.1 Z-2.8 A15. R0.5","Z-45."];u.setGCodes(w);console.log(u.getCellAsObject(0,0));console.log(u.getRowAsObject(0));console.log(u.getGCodes());const M=["title"],_=["value"],$={key:1},P={__name:"PathExplorerWidet",props:{c:Number,r:Number},setup(a){const e=u.cells,t=u.evalCell,n=a,l=x(!1);function s(d){l.value=!1,e[n.c][n.r]=d.target.value.trim()}return(d,c)=>(o(),r("div",{class:"cell",title:h(e)[a.c][a.r],onClick:c[1]||(c[1]=v=>l.value=!0)},[l.value?(o(),r("input",{key:0,value:h(e)[a.c][a.r],onChange:s,onBlur:s,onVnodeMounted:c[0]||(c[0]=({el:v})=>v.focus())},null,40,_)):(o(),r("span",$,C(h(t)(h(e)[a.c][a.r])),1))],8,M))}},U=b(P,[["__scopeId","data-v-8736c1ae"]]),j={__name:"PathExplorer",setup(a){const e=u.cells,t=u.COLUMNS;return(n,l)=>(o(),r(f,null,[l[1]||(l[1]=S("<dl data-v-033cdb5e><dt data-v-033cdb5e>TODO</dt><dd data-v-033cdb5e>禁用某单元格</dd><dd data-v-033cdb5e>单元格状态：新增/修改/删除</dd><dd data-v-033cdb5e>设置某单元格值</dd><dd data-v-033cdb5e>某单元格值 &lt;-&gt; Gcode</dd><dd data-v-033cdb5e>-</dd><dd data-v-033cdb5e>设置某列值</dd><dd data-v-033cdb5e>某列值 &lt;-&gt; Gcode</dd><dd data-v-033cdb5e>-</dd><dd data-v-033cdb5e>G1-ACR &lt;-&gt; G1/2/3</dd></dl>",1)),i("table",null,[i("thead",null,[i("tr",null,[l[0]||(l[0]=i("th",null,null,-1)),(o(!0),r(f,null,g(h(t),s=>(o(),r("th",null,C(s),1))),256))])]),i("tbody",null,[(o(!0),r(f,null,g(h(e)[0].length,s=>(o(),r("tr",null,[i("th",null,C(s-1),1),(o(!0),r(f,null,g(h(t),(d,c)=>(o(),r("td",null,[O(U,{r:s-1,c},null,8,["r","c"])]))),256))]))),256))])])],64))}},G=b(j,[["__scopeId","data-v-033cdb5e"]]),y=JSON.parse('{"title":"PathExplorer","description":"","frontmatter":{},"headers":[],"relativePath":"pages/lathe/PathExplorer.md","filePath":"pages/lathe/PathExplorer.md"}'),L={name:"pages/lathe/PathExplorer.md"},F=Object.assign(L,{setup(a){return(e,t)=>(o(),r("div",{"data-pagefind-body":!0},[t[0]||(t[0]=i("h1",{id:"pathexplorer",tabindex:"-1"},[E("PathExplorer "),i("a",{class:"header-anchor",href:"#pathexplorer","aria-label":'Permalink to "PathExplorer"'},"​")],-1)),t[1]||(t[1]=i("p",null,"This is a PathExplorer component.",-1)),O(G)]))}});export{y as __pageData,F as default};
