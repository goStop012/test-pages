import{d as defineComponent,W as reactive,s as ref,h as computed,v as watch,o as openBlock,c as createElementBlock,k as unref,t as toDisplayString,e as createCommentVNode,j as createBaseVNode,F as Fragment,E as renderList,$ as withDirectives,ae as vModelRadio,a as createTextVNode,n as normalizeClass,af as vModelSelect,ah as vModelDynamic,_ as _export_sfc}from"./framework.Cp4JlySx.js";import{U as Utils,P as Point}from"./lib.M749mhBX.js";const _hoisted_1=["id"],_hoisted_2={key:0,type:"radio",disabled:""},_hoisted_3=["value"],_hoisted_4=["onUpdate:modelValue"],_hoisted_5=["value"],_hoisted_6={class:"point"},_hoisted_7=["type","onUpdate:modelValue","readonly"],_hoisted_8={key:1},_hoisted_9=["type","onUpdate:modelValue","readonly"],_hoisted_10={colspan:"2",class:"danger"},_sfc_main=defineComponent({__name:"CalculatorWidget",props:{data:{type:Object,required:!0},displayHader:{type:Boolean}},setup(t){const c=t,{data:n,displayHader:B}=c,{name:f,input:l,output:k,instance:w}=n,o=reactive(Object.assign({},l,k)),u=ref(null),$=["value","pointC"],d=ref(null),h=ref("pointC"),_=computed(()=>Utils.difference(Object.keys(o),Utils.union(h.value,Object.keys(l)))),L=a=>{let s=a;if(a&&typeof a=="object"&&"x"in a&&"y"in a){const{x:r,y:e}=a;s=new Point({x:r,y:e}).toLathePoint()}return s},g=()=>{Object.keys(l).forEach(s=>{const r=l[s].constructor;try{new r(o[s])}catch(e){throw d.value=s,new Error(e)}d.value=null})},E=computed(()=>{const a={};return Object.keys(l).forEach(s=>{a[s]=o[s]}),a});return watch(E,()=>{try{g();const a=new w.constructor(o);for(let s in o)o[s]=L(a[s]);u.value=null}catch(a){u.value=`${a.message}`,console.log(a)}},{immediate:!0,deep:!0}),(a,s)=>(openBlock(),createElementBlock(Fragment,null,[unref(B)?(openBlock(),createElementBlock("h2",{key:0,id:unref(f).toLowerCase().replaceAll(" ","-")},toDisplayString(unref(f)),9,_hoisted_1)):createCommentVNode("",!0),createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o,(r,e)=>{var y;return openBlock(),createElementBlock("tr",null,[createBaseVNode("td",null,[createBaseVNode("span",null,[$.includes(e)?withDirectives((openBlock(),createElementBlock("input",{key:1,type:"radio",value:e,"onUpdate:modelValue":s[0]||(s[0]=i=>h.value=i)},null,8,_hoisted_3)),[[vModelRadio,h.value]]):(openBlock(),createElementBlock("input",_hoisted_2)),createTextVNode(" "+toDisplayString(e),1)])]),createBaseVNode("td",{class:normalizeClass({danger:d.value===e})},[(y=unref(l)[e])!=null&&y.options?withDirectives((openBlock(),createElementBlock("select",{key:0,"onUpdate:modelValue":i=>o[e]=i},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l)[e].options,i=>(openBlock(),createElementBlock("option",{value:i},toDisplayString(i),9,_hoisted_5))),256))],8,_hoisted_4)),[[vModelSelect,o[e]]]):(openBlock(),createElementBlock(Fragment,{key:1},[r instanceof Object?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(r,(i,m)=>(openBlock(),createElementBlock("span",_hoisted_6,[createBaseVNode("label",null,toDisplayString(m),1),withDirectives(createBaseVNode("input",{type:typeof i=="string"?"text":"number","onUpdate:modelValue":x=>o[e][m]=x,readonly:_.value.includes(e)},null,8,_hoisted_7),[[vModelDynamic,o[e][m]]])]))),256)):(openBlock(),createElementBlock("span",_hoisted_8,[withDirectives(createBaseVNode("input",{type:typeof r=="string"?"text":"number","onUpdate:modelValue":i=>o[e]=i,readonly:_.value.includes(e)},null,8,_hoisted_9),[[vModelDynamic,o[e]]])]))],64))],2)])}),256)),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_10,toDisplayString(u.value),1)])])],64))}}),CalculatorWidget=_export_sfc(_sfc_main,[["__scopeId","data-v-d39ba27c"]]);function LQuadrant(t){if(this.options=["第一象限","第四象限","第二象限","第三象限"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}function LDirection(t){if(this.options=["逆时针","顺时针"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}function LChamferType(t){if(this.options=["chamfer","radius"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}function LPosition(t){if(this.options=["外侧","内侧"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}function LAngle(v=45){this.value=v;const exp="value > -360 && value < 360";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}function LChamfer(v=0){this.value=v;const exp="value > 0 && value < 100";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}function LRadius(v=0){this.value=v;const exp="value > 0 && value < 1000";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}function LTolerance(t="60"){if(this.value=t,this.valid=c=>c.split(" ").filter(n=>n).map(n=>parseFloat(n)).length>=1,!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，值格式为：62 0.05 -0.05`)}function LToolRadius(v=0){this.value=v;const exp="value >= 0 && value < 100.";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}function LPoint(p=new Point({x:0,z:0})){this.value=p;const exp="value > -1000 && value < 1000";if(this.valid=value=>Object.values(value).every(value=>eval(exp)),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${JSON.stringify(this.value)}，取值范围：${exp}`)}function LtoValue(t){const c={};for(let n in t)c[n]=Utils.isObject(t[n])&&"value"in t[n]?t[n].value:t[n];return c}export{CalculatorWidget as C,LTolerance as L,LChamfer as a,LChamferType as b,LToolRadius as c,LQuadrant as d,LPoint as e,LAngle as f,LDirection as g,LPosition as h,LRadius as i,LtoValue as j};
