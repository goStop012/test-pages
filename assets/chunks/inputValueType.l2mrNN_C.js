var R=Object.defineProperty;var D=e=>{throw TypeError(e)};var j=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var s=(e,t,a)=>j(e,typeof t!="symbol"?t+"":t,a),g=(e,t,a)=>t.has(e)||D("Cannot "+a);var u=(e,t,a)=>(g(e,t,"read from private field"),a?a.call(e):t.get(e)),y=(e,t,a)=>t.has(e)?D("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),w=(e,t,a,c)=>(g(e,t,"write to private field"),c?c.call(e,a):t.set(e,a),a),N=(e,t,a)=>(g(e,t,"access private method"),a);import{d as defineComponent,U as reactive,p as ref,h as computed,q as watch,o as openBlock,c as createElementBlock,k as unref,t as toDisplayString,e as createCommentVNode,j as createBaseVNode,F as Fragment,C as renderList,Y as withDirectives,ac as vModelRadio,a as createTextVNode,n as normalizeClass,ad as vModelSelect,af as vModelDynamic,_ as _export_sfc}from"./framework.5q7voRLl.js";import{U as Utils}from"./Utils.n4EkZCRG.js";import{P as Point}from"./Point.BqqaAIQu.js";const _hoisted_1=["id"],_hoisted_2={key:0,type:"radio",disabled:""},_hoisted_3=["value"],_hoisted_4=["onUpdate:modelValue"],_hoisted_5=["value"],_hoisted_6={class:"point"},_hoisted_7=["type","onUpdate:modelValue","readonly"],_hoisted_8={key:1},_hoisted_9=["type","onUpdate:modelValue","readonly"],_hoisted_10={colspan:"2",class:"danger"},_sfc_main=defineComponent({__name:"CalculatorWidget",props:{data:{type:Object,required:!0},displayHader:{type:Boolean}},setup(e){const t=e,{data:a,displayHader:c}=t,{name:E,input:h,output:O,instance:T}=a,n=reactive(Object.assign({},h,O)),L=ref(null),U=["value","pointC"],k=ref(null),$=ref("pointC"),V=computed(()=>Utils.difference(Object.keys(n),Utils.union($.value,Object.keys(h)))),S=i=>{let l=i;if(i&&typeof i=="object"&&"x"in i&&"y"in i){const{x:d,y:o}=i;l=new Point({x:d,y:o}).toLathePoint()}return l},F=()=>{Object.keys(h).forEach(l=>{const d=h[l].constructor;try{new d(n[l])}catch(o){throw k.value=l,new Error(o)}k.value=null})},P=computed(()=>{const i={};return Object.keys(h).forEach(l=>{i[l]=n[l]}),i});return watch(P,()=>{try{F();const i=new T.constructor(n);for(let l in n)n[l]=S(i[l]);L.value=null}catch(i){L.value=`${i.message}`,console.log(i)}},{immediate:!0,deep:!0}),(i,l)=>(openBlock(),createElementBlock(Fragment,null,[unref(c)?(openBlock(),createElementBlock("h2",{key:0,id:unref(E).toLowerCase().replaceAll(" ","-")},toDisplayString(unref(E)),9,_hoisted_1)):createCommentVNode("",!0),createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n,(d,o)=>{var C;return openBlock(),createElementBlock("tr",null,[createBaseVNode("td",null,[createBaseVNode("span",null,[U.includes(o)?withDirectives((openBlock(),createElementBlock("input",{key:1,type:"radio",value:o,"onUpdate:modelValue":l[0]||(l[0]=r=>$.value=r)},null,8,_hoisted_3)),[[vModelRadio,$.value]]):(openBlock(),createElementBlock("input",_hoisted_2)),createTextVNode(" "+toDisplayString(o),1)])]),createBaseVNode("td",{class:normalizeClass({danger:k.value===o})},[(C=unref(h)[o])!=null&&C.options?withDirectives((openBlock(),createElementBlock("select",{key:0,"onUpdate:modelValue":r=>n[o]=r},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(h)[o].options,r=>(openBlock(),createElementBlock("option",{value:r},toDisplayString(r),9,_hoisted_5))),256))],8,_hoisted_4)),[[vModelSelect,n[o]]]):(openBlock(),createElementBlock(Fragment,{key:1},[d instanceof Object?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(d,(r,x)=>(openBlock(),createElementBlock("span",_hoisted_6,[createBaseVNode("label",null,toDisplayString(x),1),withDirectives(createBaseVNode("input",{type:typeof r=="string"?"text":"number","onUpdate:modelValue":M=>n[o][x]=M,readonly:V.value.includes(o)},null,8,_hoisted_7),[[vModelDynamic,n[o][x]]])]))),256)):(openBlock(),createElementBlock("span",_hoisted_8,[withDirectives(createBaseVNode("input",{type:typeof d=="string"?"text":"number","onUpdate:modelValue":r=>n[o]=r,readonly:V.value.includes(o)},null,8,_hoisted_9),[[vModelDynamic,n[o]]])]))],64))],2)])}),256)),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_10,toDisplayString(L.value),1)])])],64))}}),CalculatorWidget=_export_sfc(_sfc_main,[["__scopeId","data-v-9cc57923"]]);var m,f,_,B,b;class Tolerance{constructor(e={}){y(this,B);s(this,"tolerance");y(this,m);y(this,f);y(this,_);s(this,"maximum");s(this,"nominal");s(this,"minimum");const{tolerance:t="62 0.05 -0.05"}=e;this.tolerance=t,N(this,B,b).call(this)}}m=new WeakMap,f=new WeakMap,_=new WeakMap,B=new WeakSet,b=function(){const value=this.tolerance.split(" ").filter(e=>e);w(this,m,eval(value.at(0))||0),w(this,f,parseFloat(value.at(1))||0),w(this,_,parseFloat(value.at(2))||0),this.maximum=u(this,m)+u(this,f),this.nominal=u(this,m)+(u(this,f)+u(this,_))/2,this.minimum=u(this,m)+u(this,_)};class LQuadrant{constructor(t){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["第一象限","第四象限","第二象限","第三象限"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LDirection{constructor(t){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["逆时针","顺时针"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LHrOrVrLineType{constructor(t){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["水平","竖直"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LChamferType{constructor(t){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["chamfer","radius"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LPosition{constructor(t){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["外侧","内侧"],this.value=t||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LAngle{constructor(v=45){s(this,"value");s(this,"valid");this.value=v;const exp="value > -360 && value < 360";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LLength{constructor(v=0){s(this,"value");s(this,"valid");this.value=v;const exp="value >= 0 && value < 1000";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LChamfer{constructor(v=0){s(this,"value");s(this,"valid");this.value=v;const exp="value > 0 && value < 100";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LRadius{constructor(v=0){s(this,"value");s(this,"valid");this.value=v;const exp="value > 0 && value < 1000";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LTolerance{constructor(t="60"){s(this,"value");s(this,"valid");if(this.value=t,this.valid=a=>a.split(" ").filter(c=>c).map(c=>parseFloat(c)).length>=1,!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，值格式为：62 0.05 -0.05`)}}class LToolRadius{constructor(v=0){s(this,"value");s(this,"valid");this.value=v;const exp="value >= 0 && value < 100.";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LPoint{constructor(p=new Point({x:0,z:0})){s(this,"value");s(this,"valid");this.value=p;const exp="value > -1000 && value < 1000";if(this.valid=value=>Object.values(value).every(value=>eval(exp)),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${JSON.stringify(this.value)}，取值范围：${exp}`)}}function LtoValue(e){const t={};for(let a in e)t[a]=Utils.isObject(e[a])&&"value"in e[a]?e[a].value:e[a];return t}export{CalculatorWidget as C,LTolerance as L,Tolerance as T,LChamfer as a,LChamferType as b,LToolRadius as c,LQuadrant as d,LPoint as e,LAngle as f,LDirection as g,LPosition as h,LRadius as i,LLength as j,LHrOrVrLineType as k,LtoValue as l};
