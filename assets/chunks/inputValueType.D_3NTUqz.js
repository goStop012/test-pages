var R=Object.defineProperty;var D=t=>{throw TypeError(t)};var A=(t,e,a)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var s=(t,e,a)=>A(t,typeof e!="symbol"?e+"":e,a),E=(t,e,a)=>e.has(t)||D("Cannot "+a);var u=(t,e,a)=>(E(t,e,"read from private field"),a?a.call(t):e.get(t)),_=(t,e,a)=>e.has(t)?D("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),w=(t,e,a,c)=>(E(t,e,"write to private field"),c?c.call(t,a):e.set(t,a),a),T=(t,e,a)=>(E(t,e,"access private method"),a);import{d as defineComponent,U as reactive,p as ref,h as computed,q as watch,o as openBlock,c as createElementBlock,k as unref,t as toDisplayString,e as createCommentVNode,j as createBaseVNode,F as Fragment,C as renderList,Y as withDirectives,ac as vModelRadio,a as createTextVNode,n as normalizeClass,ad as vModelSelect,af as vModelDynamic,_ as _export_sfc}from"./framework.5q7voRLl.js";import{U as Utils}from"./Utils.n4EkZCRG.js";import{P as Point}from"./Point.BqqaAIQu.js";const _hoisted_1=["id"],_hoisted_2={key:0,type:"radio",disabled:""},_hoisted_3=["value"],_hoisted_4=["onUpdate:modelValue"],_hoisted_5=["value"],_hoisted_6={class:"point"},_hoisted_7=["type","onUpdate:modelValue","readonly"],_hoisted_8={key:1},_hoisted_9=["type","onUpdate:modelValue","readonly"],_hoisted_10={colspan:"2",class:"danger"},_sfc_main=defineComponent({__name:"CalculatorWidget",props:{data:{type:Object,required:!0},displayHader:{type:Boolean}},setup(t){const e=t,{data:a,displayHader:c}=e,{name:g,input:h,output:U,instance:b}=a,n=reactive(Object.assign({},h,U)),L=ref(null),O=["value","pointC"],B=ref(null),k=ref("pointC"),V=computed(()=>Utils.difference(Object.keys(n),Utils.union(k.value,Object.keys(h)))),P=i=>{let l=i;if(i&&typeof i=="object"&&"x"in i&&"y"in i){const{x:d,y:o}=i;l=new Point({x:d,y:o}).toLathePoint()}return l},S=()=>{Object.keys(h).forEach(l=>{const d=h[l].constructor;try{new d(n[l])}catch(o){throw B.value=l,new Error(o)}B.value=null})},F=computed(()=>{const i={};return Object.keys(h).forEach(l=>{i[l]=n[l]}),i});return watch(F,()=>{try{S();const i=new b.constructor(n);for(let l in n)n[l]=P(i[l]);L.value=null}catch(i){L.value=`${i.message}`,console.log(i)}},{immediate:!0,deep:!0}),(i,l)=>(openBlock(),createElementBlock(Fragment,null,[unref(c)?(openBlock(),createElementBlock("h2",{key:0,id:unref(g).toLowerCase().replaceAll(" ","-")},toDisplayString(unref(g)),9,_hoisted_1)):createCommentVNode("",!0),createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n,(d,o)=>{var C;return openBlock(),createElementBlock("tr",null,[createBaseVNode("td",null,[createBaseVNode("span",null,[O.includes(o)?withDirectives((openBlock(),createElementBlock("input",{key:1,type:"radio",value:o,"onUpdate:modelValue":l[0]||(l[0]=r=>k.value=r)},null,8,_hoisted_3)),[[vModelRadio,k.value]]):(openBlock(),createElementBlock("input",_hoisted_2)),createTextVNode(" "+toDisplayString(o),1)])]),createBaseVNode("td",{class:normalizeClass({danger:B.value===o})},[(C=unref(h)[o])!=null&&C.options?withDirectives((openBlock(),createElementBlock("select",{key:0,"onUpdate:modelValue":r=>n[o]=r},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(h)[o].options,r=>(openBlock(),createElementBlock("option",{value:r},toDisplayString(r),9,_hoisted_5))),256))],8,_hoisted_4)),[[vModelSelect,n[o]]]):(openBlock(),createElementBlock(Fragment,{key:1},[d instanceof Object?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(d,(r,x)=>(openBlock(),createElementBlock("span",_hoisted_6,[createBaseVNode("label",null,toDisplayString(x),1),withDirectives(createBaseVNode("input",{type:typeof r=="string"?"text":"number","onUpdate:modelValue":M=>n[o][x]=M,readonly:V.value.includes(o)},null,8,_hoisted_7),[[vModelDynamic,n[o][x]]])]))),256)):(openBlock(),createElementBlock("span",_hoisted_8,[withDirectives(createBaseVNode("input",{type:typeof d=="string"?"text":"number","onUpdate:modelValue":r=>n[o]=r,readonly:V.value.includes(o)},null,8,_hoisted_9),[[vModelDynamic,n[o]]])]))],64))],2)])}),256)),createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_10,toDisplayString(L.value),1)])])],64))}}),CalculatorWidget=_export_sfc(_sfc_main,[["__scopeId","data-v-9cc57923"]]);var m,f,y,$,N;class Tolerance{constructor(t={}){_(this,$);s(this,"tolerance");_(this,m);_(this,f);_(this,y);s(this,"maximum");s(this,"nominal");s(this,"minimum");const{tolerance:e="62 0.05 -0.05"}=t;this.tolerance=e,T(this,$,N).call(this)}}m=new WeakMap,f=new WeakMap,y=new WeakMap,$=new WeakSet,N=function(){const value=this.tolerance.split(" ").filter(t=>t);w(this,m,eval(value.at(0))||0),w(this,f,parseFloat(value.at(1))||0),w(this,y,parseFloat(value.at(2))||0),this.maximum=u(this,m)+u(this,f),this.nominal=u(this,m)+(u(this,f)+u(this,y))/2,this.minimum=u(this,m)+u(this,y)};class LQuadrant{constructor(e){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["第一象限","第四象限","第二象限","第三象限"],this.value=e||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LDirection{constructor(e){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["逆时针","顺时针"],this.value=e||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class frontOrAfterLineType{constructor(e){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["水平","竖直"],this.value=e||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LToolPosition{constructor(e){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["前刀尖","后刀尖"],this.value=e||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LChamferType{constructor(e){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["chamfer","radius"],this.value=e||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LPosition{constructor(e){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["外侧","内侧"],this.value=e||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LChamferValueType{constructor(e){s(this,"options");s(this,"value");s(this,"valid");if(this.options=["Uhalf","W"],this.value=e||this.options[0],this.valid=()=>this.options.includes(this.value),!this.valid())throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${this.options},`)}}class LAngle{constructor(v=45){s(this,"value");s(this,"valid");this.value=v;const exp="value > -360 && value < 360";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LLength{constructor(v=0){s(this,"value");s(this,"valid");this.value=v;const exp="value >= 0 && value < 1000";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LChamferValue{constructor(v=0){s(this,"value");s(this,"valid");this.value=v;const exp="value > 0 && value < 100";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LRadius{constructor(v=0){s(this,"value");s(this,"valid");this.value=v;const exp="value > 0 && value < 1000";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LTolerance{constructor(e="60"){s(this,"value");s(this,"valid");if(this.value=e,this.valid=a=>a.split(" ").filter(c=>c).map(c=>parseFloat(c)).length>=1,!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，值格式为：62 0.05 -0.05`)}}class LToolRadius{constructor(v=0){s(this,"value");s(this,"valid");this.value=v;const exp="value >= 0 && value < 100.";if(this.valid=value=>eval(exp),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${this.value}，取值范围：${exp}`)}}class LPoint{constructor(p=new Point({x:0,z:0})){s(this,"value");s(this,"valid");this.value=p;const exp="value > -1000 && value < 1000";if(this.valid=value=>Object.values(value).every(value=>eval(exp)),!this.valid(this.value))throw new Error(`${this.constructor.name}，当前值：${JSON.stringify(this.value)}，取值范围：${exp}`)}}function LtoValue(t){const e={};for(let a in t)e[a]=Utils.isObject(t[a])&&"value"in t[a]?t[a].value:t[a];return e}export{CalculatorWidget as C,LTolerance as L,Tolerance as T,LChamferValue as a,LChamferType as b,LToolRadius as c,LQuadrant as d,LPoint as e,LAngle as f,LChamferValueType as g,LDirection as h,LPosition as i,LRadius as j,LLength as k,LToolPosition as l,frontOrAfterLineType as m,LtoValue as n};
