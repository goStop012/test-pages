import{d as K,W as M,s as f,h as w,v as W,o as s,c as l,j as c,t as d,k as y,F as i,E as b,$ as _,ae as F,a as N,n as $,af as q,ah as U,_ as z}from"./framework.Cp4JlySx.js";import{U as V,P as A}from"./lib.DVY5Kw34.js";const R=["id"],T={key:0,type:"radio",disabled:""},G=["value"],H=["onUpdate:modelValue"],J=["value"],Q={class:"point"},X=["type","onUpdate:modelValue","readonly"],Y={key:1},Z=["type","onUpdate:modelValue","readonly"],ee={colspan:"2",class:"danger"},te=K({__name:"CalculatorWidget",props:{data:{type:Object,required:!0}},setup(C){const O=C,{data:x}=O,{name:g,input:u,output:E,instance:D}=x,a=M(Object.assign({},u,E)),m=f(null),I=["value","pointC"],p=f(null),v=f("pointC"),j=w(()=>V.difference(Object.keys(a),V.union(v.value,Object.keys(u)))),L=n=>{let e=n;return typeof n=="object"&&"x"in n&&"y"in n&&(e=new A(n).toLathePoint(),console.log(e)),e},P=()=>{Object.keys(u).forEach(e=>{const r=u[e].constructor;try{new r(a[e])}catch(t){throw p.value=e,new Error(t)}p.value=null})},S=w(()=>{const n={};return Object.keys(u).forEach(e=>{n[e]=a[e]}),n});return W(S,()=>{try{P();const n=new D.constructor(a,"lathe");for(let e in a)a[e]=L(n[e]);m.value=null}catch(n){m.value=`${n.message}`}},{immediate:!0,deep:!0}),(n,e)=>(s(),l(i,null,[c("h2",{id:y(g).toLowerCase().replaceAll(" ","-")},d(y(g)),9,R),c("table",null,[(s(!0),l(i,null,b(a,(r,t)=>{var k;return s(),l("tr",null,[c("td",null,[c("span",null,[I.includes(t)?_((s(),l("input",{key:1,type:"radio",value:t,"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o)},null,8,G)),[[F,v.value]]):(s(),l("input",T)),N(" "+d(t),1)])]),c("td",{class:$({danger:p.value===t})},[(k=y(u)[t])!=null&&k.options?_((s(),l("select",{key:0,"onUpdate:modelValue":o=>a[t]=o},[(s(!0),l(i,null,b(y(u)[t].options,o=>(s(),l("option",{value:o},d(o),9,J))),256))],8,H)),[[q,a[t]]]):(s(),l(i,{key:1},[r instanceof Object?(s(!0),l(i,{key:0},b(r,(o,h)=>(s(),l("span",Q,[c("label",null,d(h),1),_(c("input",{type:typeof o=="string"?"text":"number","onUpdate:modelValue":B=>a[t][h]=B,readonly:j.value.includes(t)},null,8,X),[[U,a[t][h]]])]))),256)):(s(),l("span",Y,[_(c("input",{type:typeof r=="string"?"text":"number","onUpdate:modelValue":o=>a[t]=o,readonly:j.value.includes(t)},null,8,Z),[[U,a[t]]])]))],64))],2)])}),256)),c("tr",null,[c("td",ee,d(m.value),1)])])],64))}}),se=z(te,[["__scopeId","data-v-acd8d493"]]);export{se as C};
