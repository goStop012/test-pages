var U=Object.defineProperty;var N=o=>{throw TypeError(o)};var W=(o,n,t)=>n in o?U(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var e=(o,n,t)=>W(o,typeof n!="symbol"?n+"":n,t),Q=(o,n,t)=>n.has(o)||N("Cannot "+t);var R=(o,n,t)=>n.has(o)?N("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(o):n.set(o,t);var P=(o,n,t)=>(Q(o,n,"access private method"),t);import{L as K,T as X,a as S,b as Y,c as x,d as q,e as m,f as M,g as E,h as b,i as Z,j as D,k as tt,l as et,C as nt}from"./chunks/inputValueType.l2mrNN_C.js";import{P as i}from"./chunks/Point.BqqaAIQu.js";import{U as _}from"./chunks/Utils.n4EkZCRG.js";import{M as w}from"./chunks/Macro.NyvPo287.js";import{d as it,o as G,c as k,C as st,F as at,G as F,j as O,a as ot}from"./chunks/framework.5q7voRLl.js";var v,j;class A{constructor(n={}){R(this,v);e(this,"sideLengthA");e(this,"sideLengthB");e(this,"sideLengthC");e(this,"angle");const{angle:t=0,sideLengthA:s=0,sideLengthB:a=0,sideLengthC:h=0}=n;if(this.angle=t,this.sideLengthA=s,this.sideLengthB=a,this.sideLengthC=h,!this.valid())throw new Error(`${this.constructor.name}，Invalid parameters: ${JSON.stringify({angle:t,sideLengthA:s,sideLengthB:a,sideLengthC:h})}`);P(this,v,j).call(this)}valid(){const n=s=>_.isNumber(s)&&s>0;return[this.angle,this.sideLengthA,this.sideLengthB,this.sideLengthC].filter(s=>n(s)).length===2}getSideLengthA(){return w.sqrt(this.sideLengthC**2-this.sideLengthB**2)}getSideLengthB(){return w.sqrt(this.sideLengthC**2-this.sideLengthA**2)}getSideLengthC(){return w.sqrt(this.sideLengthA**2+this.sideLengthB**2)}toPoint(){return new i({x:this.sideLengthA*2,z:this.sideLengthB})}}v=new WeakSet,j=function(){this.angle?this.sideLengthA?(this.sideLengthB=this.sideLengthA*w.tan(this.angle),this.sideLengthC=this.getSideLengthC()):this.sideLengthB?(this.sideLengthA=this.sideLengthB/w.tan(this.angle),this.sideLengthC=this.getSideLengthC()):this.sideLengthC&&(this.sideLengthA=this.sideLengthC*w.cos(this.angle),this.sideLengthB=this.getSideLengthB()):(this.sideLengthA&&this.sideLengthB?this.sideLengthC=this.getSideLengthC():this.sideLengthA&&this.sideLengthC?this.sideLengthB=this.getSideLengthB():this.sideLengthB&&this.sideLengthC&&(this.sideLengthA=this.getSideLengthA()),this.angle=w.acos(this.sideLengthA/this.sideLengthC))};var y,H;const z=class z extends A{constructor(t={}){super(t);R(this,y);e(this,"sideLengthACRC");e(this,"sideLengthBCRC");e(this,"toolRadius");const{toolRadius:s=0,angle:a,sideLengthA:h,sideLengthB:d,sideLengthC:r}=t;if(s<0)throw new Error(`${this.constructor.name}，当前值：toolRadius = ${s}，取值范围：toolRadius > 0`);this.toolRadius=s,this.sideLengthACRC=0,this.sideLengthBCRC=0,P(this,y,H).call(this)}static getCrcLength(t,s){return t*(1-w.tan(s/2))}toPoint(){return new i({x:this.sideLengthACRC*2,z:this.sideLengthBCRC})}};y=new WeakSet,H=function(){if(!this.angle)throw new Error(`${this.constructor.name}，Triangle angle must be set before calculating CRC.`);this.sideLengthACRC=z.getCrcLength(this.toolRadius,this.angle),this.sideLengthBCRC=z.getCrcLength(this.toolRadius,90-this.angle)};let B=z;class p{constructor(n,t){e(this,"startPoint");e(this,"endPoint");this.startPoint=n,this.endPoint=t}get vector(){return this.endPoint.sub(this.startPoint)}get distance(){return w.sqrt(this.vector.x**2+this.vector.y**2)}get unitVector(){return this.vector.div(this.distance)}get middle(){return this.startPoint.add(this.endPoint).div(2)}get slope(){return this.vector.x===0?1/0:this.vector.y/this.vector.x}get angle(){return _.radiansToDegrees(Math.atan2(this.vector.y,this.vector.x))}get increase(){return new i({y:(this.endPoint.y-this.startPoint.y)/2,x:this.endPoint.x-this.startPoint.x})}get direction(){return this.angle===90?"↑":this.angle===270?"↓":this.angle===0?"→":this.angle===180?"←":this.increase.x>0&&this.increase.y<0?"↘":this.increase.x<0&&this.increase.y<0?"↙":this.increase.x>0&&this.increase.y>0?"↗":this.increase.x<0&&this.increase.y>0?"↖":"null"}extendOrShorten(n={}){const{length:s=1,relative:a="startPoint",vertical:h=!0}=n,d=s/1,r=a==="startPoint"?-1:1;let l;h?l=new A({angle:this.angle%90,sideLengthA:1}).toPoint():l=new A({angle:this.angle%90,sideLengthC:1}).toPoint();const c=this[a].y+l.y*Math.sign(this.vector.y)*d*r,g=this[a].x+l.x*Math.sign(this.vector.x)*d*r;return a==="startPoint"?new p(new i({y:c,x:g}),this.endPoint):new p(this.startPoint,new i({y:c,x:g}))}rotateByStart(n){const t=_.degreesToRadians(n),s=Math.cos(t),a=Math.sin(t),h=this.vector.x*s-this.vector.y*a,d=this.vector.x*a+this.vector.y*s;return new p(this.startPoint,new i({x:h,y:d}).add(this.startPoint))}translation(n){return new p(this.startPoint.add(n),this.endPoint.add(n))}}var T,I;class ht{constructor(n={}){R(this,T);e(this,"toolRadius");e(this,"value");e(this,"type");e(this,"u");e(this,"w");const{toolRadius:t=.4,value:s=1,type:a="chamfer"}=n;this.toolRadius=t,this.value=s,this.type=a,P(this,T,I).call(this)}}T=new WeakSet,I=function(){this.type==="chamfer"?(this.w=this.value+B.getCrcLength(this.toolRadius,45),this.u=this.w*2):this.type==="radius"&&(this.w=this.value+this.toolRadius,this.u=this.w*2)};class J{constructor({quadrant:n="第一象限",pointC:t=new i({x:100,z:0}),angle:s=45,value:a=1,direction:h="逆时针",position:d="外侧",toolRadius:r=.4,startLineType:l="竖直",endLineType:c="水平"}={}){e(this,"quadrant");e(this,"pointC");e(this,"angle");e(this,"value");e(this,"direction");e(this,"position");e(this,"toolRadius");e(this,"startLineType");e(this,"endLineType");e(this,"pointA");e(this,"pointB");this.quadrant=n,this.pointC=t,this.angle=s,this.value=a,this.direction=h,this.position=d,this.toolRadius=r,this.startLineType=l,this.endLineType=c}}class rt extends J{constructor(t={}){const{quadrant:s="第一象限",pointC:a=new i({x:100,z:0}),angle:h=45,value:d=1,direction:r="逆时针",position:l="外侧",toolRadius:c=.4,startLineType:g="竖直",endLineType:C="水平"}=t;super(t);e(this,"radius");e(this,"radiusCRC");this.radius=h===45?this.value:void 0;const u=this.calc();this.pointA=u.pointA,this.pointB=u.pointB,this.radiusCRC=u.radiusCRC}calc(){const t=new A({angle:this.angle,sideLengthA:this.value}),s={第一象限:{pointA:new i({x:-(t.sideLengthA*2),z:0}),pointB:new i({x:0,z:-t.sideLengthB})},第四象限:{pointA:new i({x:0,z:-t.sideLengthB}),pointB:new i({x:t.sideLengthA*2,z:0})},第二象限:{pointA:new i({x:0,z:t.sideLengthB}),pointB:new i({x:-(t.sideLengthA*2),z:0})},第三象限:{pointA:new i({x:t.sideLengthA*2,z:0}),pointB:new i({x:0,z:t.sideLengthB})}},a=this.toolRadius!==0,h=this.position==="外侧",d=this.direction==="顺时针",r=a?this.toolRadius:0,l=h?1:-1,c=s[this.quadrant],g=c.pointA.mul(r*l),C=c.pointB.mul(r*l),u=new i(this.pointC).add(c.pointA).add(g),f=new i(this.pointC).add(c.pointB).add(C),L=this.radius??0,V=a?h?L+this.toolRadius:L-this.toolRadius:L;return d?{pointA:f,pointB:u,radiusCRC:V}:{pointA:u,pointB:f,radiusCRC:V}}}class $ extends J{constructor(t={}){const{quadrant:s="第一象限",pointC:a=new i({x:100,z:0}),angle:h=45,value:d=1,direction:r="逆时针",position:l="外侧",toolRadius:c=0}=t;super(t);e(this,"chamfer");e(this,"chamferCRC");e(this,"unitVector");e(this,"length");e(this,"arrowDirection");e(this,"extendFromPointA");this.chamfer=this.angle===45?this.value:void 0;const g=this.calc();this.pointA=g.pointA,this.pointB=g.pointB,this.chamferCRC=g.chamferCRC,this.arrowDirection=new p(this.pointA,this.pointB).direction,this.unitVector=new p(this.pointA,this.pointB).unitVector,this.extendFromPointA=new p(this.pointA,this.pointB).extendOrShorten().startPoint,this.length=new p(this.pointA,this.pointB).distance}calc(){const t=new A({angle:this.angle,sideLengthA:this.value}),s=new B({toolRadius:this.toolRadius,angle:this.angle,sideLengthA:this.value}),a={第一象限:{pointA:new i({x:-2,z:0}),pointB:new i({x:0,z:-1})},第四象限:{pointA:new i({x:2,z:0}),pointB:new i({x:0,z:-1})},第二象限:{pointA:new i({x:-2,z:0}),pointB:new i({x:0,z:1})},第三象限:{pointA:new i({x:2,z:0}),pointB:new i({x:0,z:1})}},h=this.toolRadius!==0,d=this.position==="外侧",r=this.direction==="顺时针",l=h?1:0,c=d?1:-1,g={A:a[this.quadrant].pointA,B:a[this.quadrant].pointB},C={A:g.A.mul(t.sideLengthA),B:g.B.mul(t.sideLengthB)},u={A:g.A.mul(s.sideLengthACRC).mul(l).mul(c),B:g.B.mul(s.sideLengthACRC).mul(l).mul(c)};let f,L;return this.startLineType==="竖直"&&(f=new i(this.pointC).add(C.A).add(u.A),L=new i(this.pointC).add(C.B).add(u.B)),this.startLineType==="水平"&&(f=new i(this.pointC).add(C.A).add(u.B),L=new i(this.pointC).add(C.B).add(u.B)),this.chamferCRC=this.chamfer?this.chamfer+B.getCrcLength(this.toolRadius,45)*c:null,r?{pointA:L,pointB:f,chamferCRC:this.chamferCRC}:{pointA:f,pointB:L,chamferCRC:this.chamferCRC}}}class dt{constructor(n={}){e(this,"startPoint");e(this,"endPoint");e(this,"startExtend");e(this,"endExtend");e(this,"toolRadius");e(this,"taper");e(this,"direction");e(this,"angle");e(this,"oStartPoint");e(this,"oEndPoint");const{startPoint:t=new i({x:100,z:0}),endPoint:s=new i({x:120,z:-10}),startExtend:a=0,endExtend:h=0,toolRadius:d=0}=n;this.startPoint=t,this.endPoint=s;let r=new p(new i(t),new i(s));r.extendOrShorten({length:1,relative:"startPoint"}),this.taper=r.vector.toLathePoint().z,this.angle=r.angle,this.direction=r.direction}}class ct{constructor(n={}){e(this,"startPoint");e(this,"endPoint");e(this,"startExtend");e(this,"endExtend");e(this,"toolRadius");e(this,"taper");e(this,"direction");e(this,"angle");e(this,"oStartPoint");e(this,"oEndPoint");const{startPoint:t=new i({x:100,z:0}),endPoint:s=new i({x:120,z:-10})}=n;this.startPoint=t,this.endPoint=s;const a=new p(new i(t),new i(s));this.taper=a.vector.div(2).toLathePoint().x,this.angle=a.angle,this.direction=a.direction}}const lt=it({__name:"Calculator",setup(o){class n{constructor(a){e(this,"name");e(this,"input");e(this,"output");e(this,"instance");const{name:h,input:d,instance:r}=a;this.name=h,this.input=d,this.instance=r,this.output=new r.constructor(et(d))}}const t=[new n({name:"Tolerance",input:{tolerance:new K},instance:new X}),new n({name:"RightTriangeChamferSimple",input:{value:new S(1),type:new Y("chamfer"),toolRadius:new x(0)},instance:new ht}),new n({name:"RightTriangeCtypeChamfer",input:{quadrant:new q,pointC:new m(new i({x:100,z:0})),angle:new M(45),value:new S(1),direction:new E("逆时针"),position:new b("外侧"),toolRadius:new x(0)},instance:new $}),new n({name:"RightTriangeRtypeChamfer",input:{quadrant:new q,pointC:new m(new i({x:100,z:0})),value:new Z(1),direction:new E("逆时针"),position:new b("外侧"),toolRadius:new x(0)},instance:new rt}),new n({name:"G90",input:{startPoint:new m(new i({x:100,z:0})),endPoint:new m(new i({x:120,z:-20})),startExtend:new D,endExtend:new D,toolRadius:new x(0)},instance:new ct}),new n({name:"G94",input:{startPoint:new m(new i({x:100,z:0})),endPoint:new m(new i({x:120,z:-20}))},instance:new dt}),new n({name:"RightTriangeCtypeChamfer-第二象限测试",input:{quadrant:new q("第二象限"),pointC:new m(new i({x:12.7,z:-18})),angle:new M(80),value:new S(3.175),direction:new E("逆时针"),position:new b("外侧"),toolRadius:new x(0),startLineType:new tt("竖直")},instance:new $})];return(s,a)=>(G(),k(at,null,st(t,h=>F(nt,{data:h,displayHader:!0},null,8,["data"])),64))}}),mt=JSON.parse('{"title":"Calculator","description":"","frontmatter":{},"headers":[],"relativePath":"pages/lathe/Calculator.md","filePath":"pages/lathe/Calculator.md"}'),gt={name:"pages/lathe/Calculator.md"},xt=Object.assign(gt,{setup(o){return(n,t)=>(G(),k("div",{"data-pagefind-body":!0},[t[0]||(t[0]=O("h1",{id:"calculator",tabindex:"-1"},[ot("Calculator "),O("a",{class:"header-anchor",href:"#calculator","aria-label":'Permalink to "Calculator"'},"​")],-1)),t[1]||(t[1]=O("p",null,"This is a calculator component.",-1)),F(lt)]))}});export{mt as __pageData,xt as default};
