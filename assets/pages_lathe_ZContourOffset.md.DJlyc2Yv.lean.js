import{_ as k,U as S,B,o as x,c as h,j as t,G as F,w as M,a as Z,Y as C,ae as c,F as y,C as W,t as D}from"./chunks/framework.5q7voRLl.js";const G={__name:"ZContourOffset",setup(U){let $=n=>Number.parseFloat(n);Number.prototype.toAxisFloatValue=function(){let n=Math.round(Number(this)*1e3)/1e3;return $(n.toString())},Number.prototype.formatAxisFloatValue=function(){let n=this.toAxisFloatValue().toString();return n.indexOf(".")<0?n+".":n},Number.prototype.print=function(){return this.formatAxisFloatValue()};function p(n){if(!n.startsWith("="))return n;n=n.slice(1).replace(/\b([A-Z])(\d{1,2})\b/g,(e,a,o)=>`get(${a.charCodeAt(0)-65},${o})`);try{return new Function("get",`return ${n}`)()}catch(e){return`#ERROR ${e}`}}const l=S({u:.11,w:-.051,inputCode:`
G1 X[=62+2/2-1,,-0.45] Z[1.,1]
U1.5
G1 Z0. F0.25
U-1.5 W-0.75
Z-2.
`,outputCode:"",replaceList:[]}),w=(n=n,e=l.inputCode,a=l.outputCode,o=l.u,E=l.w)=>{let L=e.toUpperCase().matchAll(/(X|Z)(\[(?<tolerancesExpression>.*?)\]|(?<address>-?\d{0,}(\.\d{0,})?))/g),V=[];l.replaceList=[];for(let u of L){let s,f=u[1],d=u.groups.tolerancesExpression,m=u.groups.address;if(d){let r=d.split(","),O=r.length;r.length<3&&(r.length=3,r.fill(0,O)),r[0]=p(r[0]),r=r.map(R=>Number(R));let[v,g,b]=r;g===0?s=v+b:b===0?s=v+g:g!==0&&b!==0&&(s=v+(g+b)/2)}else m&&(s=Number(m));console.log(u[0],s.print());let i;f==="X"&&(i=Number(o)),f==="Z"&&(i=Number(E)),s+=i,V.push([u[0],f+s.print(),RegExp.leftContext.length,RegExp.lastMatch.length,s,i])}a=e;let N=0;for(let[u,s,f,d,m,i]of V){let r=a.slice(0,f+N),O=a.slice(f+N+d);a=r+s+O,N+=s.length-u.length,console.log(`${u} => ${s}`),l.replaceList.push({source:u,express:`${m-i} + ${i}`,target:s})}console.log(a),l.outputCode=a},A=()=>{l.u=0,l.w=0,l.inputCode="",l.outputCode="",l.replaceList=[]};return(n,e)=>{const a=B("from");return x(),h(y,null,[e[11]||(e[11]=t("header",null,[t("h1",null,"轮廓偏移")],-1)),t("main",null,[F(a,null,{default:M(()=>[t("fieldset",null,[e[7]||(e[7]=t("legend",null,"偏移",-1)),t("label",null,[e[4]||(e[4]=Z(" U: [ ")),C(t("input",{type:"number",maxlength:"10",placeholder:"U","onUpdate:modelValue":e[0]||(e[0]=o=>l.u=o)},null,512),[[c,l.u]]),e[5]||(e[5]=Z(" ] W: [ ")),C(t("input",{type:"number",maxlength:"10",placeholder:"W","onUpdate:modelValue":e[1]||(e[1]=o=>l.w=o)},null,512),[[c,l.w]]),e[6]||(e[6]=Z(" ] "))])]),t("fieldset",null,[e[8]||(e[8]=t("legend",null,"输入",-1)),C(t("textarea",{class:"message","onUpdate:modelValue":e[2]||(e[2]=o=>l.inputCode=o)},null,512),[[c,l.inputCode]])]),t("fieldset",{class:"from-button"},[t("input",{type:"button",value:"生成",class:"button-blue",onClick:w}),t("input",{type:"reset",value:"清空",class:"button-orange",onClick:A})]),t("fieldset",null,[e[9]||(e[9]=t("legend",null,"输出",-1)),C(t("textarea",{class:"message","onUpdate:modelValue":e[3]||(e[3]=o=>l.outputCode=o)},null,512),[[c,l.outputCode]])]),t("fieldset",null,[e[10]||(e[10]=t("legend",null,"表达式列表",-1)),t("ol",null,[(x(!0),h(y,null,W(l.replaceList,o=>(x(),h("li",null,D(`${o.source} => ${o.express} => ${o.target}`),1))),256))])])]),_:1})])],64)}}},P=k(G,[["__scopeId","data-v-b04ef2a7"]]),j=JSON.parse('{"title":"ZContourOffset","description":"","frontmatter":{},"headers":[],"relativePath":"pages/lathe/ZContourOffset.md","filePath":"pages/lathe/ZContourOffset.md"}'),T={name:"pages/lathe/ZContourOffset.md"},z=Object.assign(T,{setup(U){return($,p)=>(x(),h("div",{"data-pagefind-body":!0},[p[0]||(p[0]=t("h1",{id:"zcontouroffset",tabindex:"-1"},[Z("ZContourOffset "),t("a",{class:"header-anchor",href:"#zcontouroffset","aria-label":'Permalink to "ZContourOffset"'},"​")],-1)),p[1]||(p[1]=t("p",null,"This is a ZContourOffset component.",-1)),F(P)]))}});export{j as __pageData,z as default};
